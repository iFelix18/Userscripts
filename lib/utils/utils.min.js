// ==UserScript==
// @author          Davide <iFelix18@protonmail.com>
// @namespace       https://github.com/iFelix18
// @exclude         *
// ==UserLibrary==
// @name            Monkey Utils
// @description     Utils for my userscripts
// @copyright       2019, Davide (https://github.com/iFelix18)
// @license         MIT
// @version         2.2.2
// @homepageURL     https://github.com/iFelix18/Userscripts
// @supportURL      https://github.com/iFelix18/Userscripts/issues
// ==/UserLibrary==
// @require         https://cdn.jsdelivr.net/gh/greasemonkey/gm4-polyfill@master/gm4-polyfill.min.js
// @include         *
// @grant           GM.getValue
// @grant           GM_getValue
// ==/UserScript==
(()=>{this.MonkeyUtils=class{constructor(o={}){if(!o.name)throw new Error("Userscript name is required");if(!o.version)throw new Error("Userscript version is required");if(!o.author)throw new Error("Userscript author is required");this._config={name:o.name.toUpperCase(),version:o.version,author:/^(.*?)(\s<\S+@\S+\.\S+>)/.test(o.author)?o.author.match(/^(.*?)(\s<\S+@\S+\.\S+>)/)[1]:o.author,color:o.color||"red",logging:o.logging||!1}}async init(o){if(console.log(`%c${this._config.name}\n`+`%cv${this._config.version} by ${this._config.author} is running!`,`color:${this._config.color};font-weight:bold;font-size:18px;`,""),o&&!0===this._config.logging){const i=JSON.parse(await GM.getValue(o));for(const o of Object.keys(i))console.log(`${this._config.name}:`,`${o} is "${i[o]}"`)}}log(o){!0===this._config.logging&&console.log(`${this._config.name}:`,o)}error(o){console.error(`${this._config.name}:`,o)}alert(o){window.alert(`${this._config.name}: ${o}`)}short(o){return[...o.split(/\s+/).slice(0,6).join(" ")," [...]"]}}})();