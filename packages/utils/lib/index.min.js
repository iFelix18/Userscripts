// ==UserScript==
// @author       Davide <iFelix18@protonmail.com>
// @namespace    https://github.com/iFelix18
// @exclude      *
// ==UserLibrary==
// @name         @ifelix18/utils
// @description  Utils for my userscripts
// @copyright    2019, Davide (https://github.com/iFelix18)
// @license      MIT
// @version      5.1.1
// @homepage     https://github.com/iFelix18/Userscripts/tree/master/packages/utils#readme
// @homepageURL  https://github.com/iFelix18/Userscripts/tree/master/packages/utils#readme
// @supportURL   https://github.com/iFelix18/Userscripts/issues
// ==/UserLibrary==
// @grant        GM.deleteValue
// @grant        GM.getValue
// @grant        GM.setValue
// ==/UserScript==
this.UserscriptUtils=function(){class o{constructor(o={}){if(!o.name)throw new Error("Userscript name is required");if(!o.author)throw new Error("Userscript author is required");const i=/^(.*?)\s<\S[^\s@]*@\S[^\s.]*\.\S+>$/.exec(o.author);this._config={name:o.name.toUpperCase(),version:o.version||void 0,author:i?i[1]:o.author,color:o.color||"red",logging:o.logging||!1}}async init(o){if(console.log(`%c${this._config.name}\n${this._config.version?`%cv${this._config.version} `:"%c"}by ${this._config.author} is running!`,`color:${this._config.color};font-weight:bold;font-size:18px;`,""),o&&!0===this._config.logging){const i=JSON.parse(await GM.getValue(o));for(const o of Object.keys(i))console.log(`${this._config.name}:`,`${o} is "${i[o]}"`)}}log(o){!0===this._config.logging&&console.log(`${this._config.name}:`,o)}error(o){console.error(`${this._config.name}:`,o)}alert(o){window.alert(`${this._config.name}: ${o}`)}short(o,i){return o.split(" ").length>i?`${o.split(" ",i).join(" ")} [...]`:o}}return o.migrateConfig=async(o,i)=>{if(!o)throw new Error("An old config ID is required");if(!i)throw new Error("An new config ID is required");const n=await GM.getValue(o);n&&(GM.setValue(i,n),GM.deleteValue(o),window.location.reload(!1))},o}();
