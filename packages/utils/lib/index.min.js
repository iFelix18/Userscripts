// ==UserScript==
// @author       Davide <iFelix18@protonmail.com>
// @namespace    https://github.com/iFelix18
// @exclude      *
// ==UserLibrary==
// @name         @ifelix18/utils
// @description  Utils for my userscripts
// @copyright    2019, Davide (https://github.com/iFelix18)
// @license      MIT
// @version      6.5.0
// @homepage     https://github.com/iFelix18/Userscripts/tree/master/packages/utils#readme
// @homepageURL  https://github.com/iFelix18/Userscripts/tree/master/packages/utils#readme
// @supportURL   https://github.com/iFelix18/Userscripts/issues
// ==/UserLibrary==
// ==/UserScript==
this.UU=function(){const e={},t=GM.info.script.name,o=GM.info.script.version,n=/^(.*?)\s<\S[^\s@]*@\S[^\s.]*\.\S+>$/.exec(GM.info.script.author),s=n?n[1]:GM.info.script.author;let r=t.toLowerCase().replace(/\s/g,"-"),i=!1;const l=e=>new Promise((t=>{new IntersectionObserver((e=>{$.each(e,((e,o)=>{t(o.intersectionRatio>0)}))}),{rootMargin:"0px",threshold:1}).observe(e)})),a=()=>{new MutationObserver((()=>{$.each(e,(t=>{$(t).each(((o,n)=>{const s=!e[t].onlyFirstMatch||!e[t].onlyFirstMatch;return(async(t,o)=>{const n=!e[t].onlyVisible||await l(o);!$(o).data(r)&&n&&($(o).data(r,1),e[t].callback.call(o,o),e[t].onlyFirstMatch&&delete e[t])})(t,n),s}))}))})).observe(document,{attributes:!0,childList:!0,subtree:!0})};return{init:async(e={})=>{r=e.id,i="boolean"==typeof e.logging&&e.logging;console.info(`%c${t}\n%cv${o}${s?` by ${s}`:""} is running!`,"color:red;font-weight:700;font-size:18px;text-transform:uppercase","")},log:e=>{i&&console.log(`${t}:`,e)},error:e=>{console.error(`${t}:`,e)},warn:e=>{console.warn(`${t}:`,e)},alert:e=>{window.alert(`${t}: ${e}`)},short:(e,t)=>e.split(" ").length>Number(t)?`${e.split(" ",Number(t)).join(" ")} [...]`:e,addStyle:e=>{const t=$("head"),o=`<style type='text/css'>${e}</style>`;t.length>0&&$(t).append(o)},observe:{creation:(t,o,n={})=>{$.extend(e,{[t]:{callback:o,onlyVisible:"boolean"==typeof n.onlyVisible&&n.onlyVisible,onlyFirstMatch:"boolean"==typeof n.onlyFirstMatch&&n.onlyFirstMatch}}),a()}}}}();
